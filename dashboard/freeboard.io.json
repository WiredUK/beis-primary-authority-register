{"version":1,"header_image":"","allow_edit":true,"plugins":["https://raw.githubusercontent.com/onlinux/freeboard-dynamic-highcharts-plugin/master/plugin_highcharts.js","/plugins/all","https://raw.githubusercontent.com/daleroy1/freeboard-table/master/widget.tables.js"],"panes":[{"title":"PRODUCTION HEALTH","width":1,"row":{"3":1,"4":1,"5":1,"6":1},"col":{"3":1,"4":1,"5":1,"6":1},"col_width":1,"widgets":[{"type":"text_widget","settings":{"animate":true,"value":"// Create a new JavaScript Date object based on the timestamp\n// multiplied by 1000 so that the argument is in milliseconds, not seconds.\n\nvar latest_check = datasources[\"Uptime Robot\"][\"monitors\"][0][\"response_times\"][0];\n\nvar unix_timestamp = latest_check[\"datetime\"];\n\nvar date = new Date(unix_timestamp*1000);\n// Hours part from the timestamp\nvar hours = date.getHours();\n// Minutes part from the timestamp\nvar minutes = \"0\" + date.getMinutes();\n// Seconds part from the timestamp\nvar seconds = \"0\" + date.getSeconds();\n\n// Will display time in 10:30:23 format\nvar formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n\nreturn date.toLocaleDateString(\"en-GB\") + \" \" + formattedTime;\n","size":"regular","title":"Last Check"}},{"type":"indicator_widget","settings":{"off_text":"Not Responding","on_text":"Responding","value":"return datasources[\"Uptime Robot\"][\"stat\"] == \"ok\" ? true : false;","title":""}},{"type":"text_widget","settings":{"units":"ms","animate":true,"value":["datasources[\"Uptime Robot\"][\"monitors\"][0][\"response_times\"][0][\"value\"]"],"size":"regular","title":"Last Response Time"}},{"type":"gauge_widget","settings":{"max_value":"2000","min_value":0,"value":"Math.floor(datasources[\"Uptime Robot\"][\"monitors\"][0][\"average_response_time\"]);","title":"Average Response Time"}},{"type":"text_widget","settings":{"units":"%","animate":true,"value":"var v = datasources[\"Uptime Robot\"][\"monitors\"][0][\"custom_uptime_ratio\"];\nvar f = parseFloat(v);\nvar r = 100;\nif (f < 100) {\n    r = f.toFixed(2);\n}\nreturn r;","size":"regular","title":"Uptime over last seven days"}}]},{"title":"Instance 1","width":1,"row":{"3":1,"4":1,"5":1,"6":1},"col":{"3":2,"4":3,"5":3,"6":3},"col_width":1,"widgets":[{"type":"text_widget","settings":{"units":"%","animate":true,"sparkline":false,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar cpu = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#1') {\n        if (message.cpu != -1) {\n            cpu = message.cpu;\n            message.cpu = '-1';\n        }\n    }\n}\n\nreturn cpu;\n","size":"regular","title":"CPU"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar memory = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#1') {\n        if (message.memory.used != -1) {\n\t        memory = message.memory.used;\n            message.memory.used = -1;\n        }\n    }\n}\n\nreturn memory;\n","size":"regular","title":"Memory"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar disk = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#1') {\n        if (message.disk.used != -1) {\n\t        disk = message.disk.used;\n            message.disk.used = -1;\n        }\n    }\n}\n\nreturn disk;","size":"regular","title":"Disk"}}]},{"title":"Instance 2","width":1,"row":{"3":1,"4":1,"5":1,"6":1},"col":{"3":3,"4":4,"5":4,"6":4},"col_width":1,"widgets":[{"type":"text_widget","settings":{"units":"%","animate":true,"sparkline":false,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar cpu = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#2') {\n        if (message.cpu != -1) {\n            cpu = message.cpu;\n            message.cpu = '-1';\n        }\n    }\n}\n\nreturn cpu;\n","size":"regular","title":"CPU"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar memory = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#2') {\n        if (message.memory.used != -1) {\n\t        memory = message.memory.used;\n            message.memory.used = -1;\n        }\n    }\n}\n\nreturn memory;\n","size":"regular","title":"Memory"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar disk = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#2') {\n        disk = message.disk.used;\n    }\n}\n\nreturn disk;","size":"regular","title":"Disk"}}]},{"title":"Open Pull Requests","width":1,"row":{"3":9,"4":9,"5":9,"6":9},"col":{"3":2,"4":2,"5":4,"6":-33},"col_width":"2","widgets":[{"type":"plugin531a3b2b7df9e78c7300000f","settings":{"html":"var s = `<style>\ntable#pulls {\n    font-family: \"Trebuchet MS\", Arial, Helvetica, sans-serif;\n    border-collapse: collapse;\n    width: 42em;\n}\n\ntable#pulls td, table#pulls th {\n    border: 1px solid #ddd;\n    padding: 8px;\n}\n\ntable#pulls tr:nth-child(even){background-color: #444;}\n\ntable#pulls th {\n    padding-top: 12px;\n    padding-bottom: 12px;\n    text-align: left;\n    background-color: #4CAF50;\n    color: white;\n}\n</style>`;\n\nvar json = datasources[\"Pull Requests\"];\ns += \"<table id='pulls' style='margin:1em' cellpadding=2>\";\nfor(var i = 0; i < json.length; i++) {\n    var obj = json[i];\n\n    if (obj.state == \"open\") {\n\t    s += \"<tr style='border-bottom:1px solid #aaaaaa'><td valign='top'>\" + obj.user.login + \"&nbsp;</td><td>\" + obj.title + \"</td></tr>\";\n    }\n}\ns += \"</table>\";\nreturn s;","height":"8"}}]},{"title":"Travis Build","width":1,"row":{"3":17,"4":9,"5":27,"6":1},"col":{"3":1,"4":4,"5":2,"6":6},"col_width":1,"widgets":[{"type":"text_widget","settings":{"animate":true,"value":"datasources[\"Travis Summary\"][\"branch\"][\"state\"] ","size":"regular","title":"Build Status"}},{"type":"text_widget","settings":{"animate":true,"value":"datasources[\"Travis Summary\"][\"branch\"][\"number\"]","size":"regular","title":"Latest Build Number"}},{"type":"text_widget","settings":{"animate":true,"value":"var finished_at = datasources[\"Travis Summary\"][\"branch\"][\"finished_at\"];\n\nif (finished_at == \"\" || finished_at == null) {\n    return \"Building...\";\n}\n\nvar unix_timestamp = Date.parse(finished_at)/1000;\n\nvar date = new Date(unix_timestamp*1000);\n// Hours part from the timestamp\nvar hours = date.getHours();\n// Minutes part from the timestamp\nvar minutes = \"0\" + date.getMinutes();\n// Seconds part from the timestamp\nvar seconds = \"0\" + date.getSeconds();\n\n// Will display time in 10:30:23 format\nvar formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n\nreturn date.toLocaleDateString(\"en-GB\") + \" \" + formattedTime;\n","size":"regular","title":"Last Build Completed"}},{"type":"text_widget","settings":{"units":"","animate":true,"value":"var seconds = datasources[\"Travis Summary\"][\"branch\"][\"duration\"];\n\nif (seconds == \"\") {\n    return \"Building...\";\n}\n\nreturn Math.floor(seconds / 60) + \"m \" + (seconds % 60) + \"s\";","size":"regular","title":"Last Build Duration"}}]},{"title":"Test Results","width":1,"row":{"3":27,"4":27,"5":27,"6":9},"col":{"3":1,"4":1,"5":1,"6":2},"col_width":1,"widgets":[{"type":"plugin531a3b2b7df9e78c7300000f","settings":{"height":4,"html":"var json = datasources[\"Travis Tests\"];\nvar s = \"<table style='margin:1em' cellpadding=2>\";\ns += \"<tr><th colspan=\\\"2\\\">PHPUNIT</th></tr>\";\ns += \"<tr><td valign='top'>Tests</td><td>\" + json.tests + \"</td></tr>\";\ns += \"<tr><td valign='top'>Failures</td><td>\" + json.failures + \"</td></tr>\";\ns += \"<tr><td valign='top'>Assertions</td><td>\" + json.assertions + \"</td></tr>\";\ns += \"<tr><td valign='top'>Errors</td><td>\" + json.errors + \"</td></tr>\";\ns += \"<tr><td valign='top'>Time</td><td>\" + json.time + \"</td></tr>\";\ns += \"</table>\";\nreturn s;"}}]},{"title":"Instance 3","width":1,"row":{"3":27,"4":1,"5":1,"6":1},"col":{"3":2,"4":4,"5":5,"6":5},"col_width":1,"widgets":[{"type":"text_widget","settings":{"title":"CPU","size":"regular","value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar cpu = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#3') {\n        if (message.cpu != -1) {\n\t        cpu = message.cpu;\n            message.cpu = -1;\n        }\n    }\n}\n\nreturn cpu;\n","animate":true,"units":"%"}},{"type":"text_widget","settings":{"title":"Memory","size":"regular","value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar memory = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#3') {\n        if (message.memory.used != -1) {\n\t        memory = message.memory.used;\n            message.memory.used = -1;\n        }\n    }\n}\n\nreturn memory;\n","animate":true,"units":""}},{"type":"text_widget","settings":{"title":"Disk","size":"regular","value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar disk = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#3') {\n        disk = message.disk.used;\n    }\n}\n\nreturn disk;","animate":true}}]},{"title":"Instance 0","width":1,"row":{"3":27,"4":1,"5":1,"6":1},"col":{"3":3,"4":2,"5":2,"6":2},"col_width":1,"widgets":[{"type":"text_widget","settings":{"units":"%","animate":true,"sparkline":false,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar cpu = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#0') {\n        if (message.cpu != -1) {\n\t        cpu = message.cpu;\n            message.cpu = -1;\n        }\n    }\n}\n\nreturn cpu;\n","size":"regular","title":"CPU"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar memory = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#0') {\n        if (message.memory.used != -1) {\n\t        memory = message.memory.used;\n            message.memory.used = -1;\n        }\n    }\n}\n\nreturn memory;\n","size":"regular","title":"Memory"}},{"type":"text_widget","settings":{"animate":true,"value":"var messages = datasources[\"Cloud Foundry PN\"][\"production\"];\n\nvar disk = 'Waiting...';\n\nfor (var i=0; i<messages.length; i++) {\n\n    var message = messages[i];\n    \n    if (message.instance == '#0') {\n        disk = message.disk.used;\n    }\n}\n\nreturn disk;","size":"regular","title":"Disk"}}]},{"title":"Commits","width":1,"row":{"3":35,"4":9,"5":9,"6":9},"col":{"3":2,"4":3,"5":2,"6":-33},"col_width":"2","widgets":[{"type":"plugin531a3b2b7df9e78c7300000f","settings":{"html":"var s = `<style>\ntable#commits {\n    font-family: \"Trebuchet MS\", Arial, Helvetica, sans-serif;\n    border-collapse: collapse;\n    width: 42em;\n}\n\ntable#commits td, table#commits th {\n    border: 1px solid #ddd;\n    padding: 8px;\n}\n\ntable#commits tr:nth-child(even){background-color: #444;}\n\ntable#commits th {\n    padding-top: 12px;\n    padding-bottom: 12px;\n    text-align: left;\n    background-color: #4CAF50;\n    color: white;\n}\n</style>`;\n\nvar json = datasources[\"Commits\"];\ns += \"<table id='commits' style='margin:1em'>\";\nfor(var i = 0; i < json.length; i++) {\n    var obj = json[i];\n\n    s += \"<tr style='border-bottom:1px solid #aaaaaa'><td valign='top'>\" + obj.commit.author.name + \"&nbsp;</td><td>\" + obj.commit.message + \"</td></tr>\";\n}\ns += \"</table>\";\nreturn s;","height":"8"}}]},{"width":1,"row":{"2":1,"3":37,"4":17,"5":17,"6":17},"col":{"2":2,"3":1,"4":4,"5":1,"6":1},"col_width":"1","widgets":[{"type":"text_widget","settings":{"animate":false,"sparkline":false,"value":"datasources[\"Production Build Version\"][\"tag\"]","size":"regular","title":"Production Build Version"}},{"type":"text_widget","settings":{"animate":true,"value":"datasources[\"Staging Build Version\"][\"tag\"]","size":"regular","title":"Staging Build Version"}},{"type":"text_widget","settings":{"animate":true,"value":"datasources[\"Demo Build Version\"][\"tag\"]","size":"regular","title":"Demo Build Version"}},{"type":"text_widget","settings":{"animate":true,"value":"datasources[\"Continuous Build Version\"][\"build\"]","size":"regular","title":"Continuous Build Number"}}]}],"datasources":[{"name":"Production Build Version","type":"plugin52b0be5c88ca16c9ae000005","settings":{"name":"Production Build Version","method":"GET","refresh":5,"use_thingproxy":true,"url":"https://primary-authority.beis.gov.uk/build_version.txt?r=16"}},{"name":"Staging Build Version","type":"plugin52b0be5c88ca16c9ae000005","settings":{"method":"GET","refresh":5,"use_thingproxy":true,"url":"https://staging-cdn.par-beta.co.uk/build_version.txt?r=12"}},{"name":"Uptime Robot","type":"plugin52b0be5c88ca16c9ae000005","settings":{"body":"api_key=m779460318-4d6cf156f6482055cb5f1f96&monitors=779460318&logs=1&custom_uptime_ratios=7&response_times=1","method":"POST","refresh":5,"use_thingproxy":true,"url":"https://api.uptimerobot.com/v2/getMonitors"}},{"name":"Cloud Foundry","type":"plugin52b0be5c88ca16c9ae000005","settings":{"method":"GET","refresh":5,"use_thingproxy":true,"url":"https://www.dropbox.com/s/4ai9xgjmgxwmyek/production.json?dl=1"}},{"name":"Demo Build Version","type":"plugin52b0be5c88ca16c9ae000005","settings":{"method":"GET","refresh":5,"use_thingproxy":true,"url":"https://demo-cdn.par-beta.co.uk/build_version.txt?r=14"}},{"name":"Pull Requests","type":"plugin52b0be5c88ca16c9ae000005","settings":{"url":"https://api.github.com/repos/UKGovernmentBEIS/beis-primary-authority-register/pulls","use_thingproxy":true,"refresh":30,"method":"GET"}},{"name":"Commits","type":"plugin52b0be5c88ca16c9ae000005","settings":{"url":"https://api.github.com/repos/UKGovernmentBEIS/beis-primary-authority-register/commits","use_thingproxy":true,"refresh":30,"method":"GET"}},{"name":"Continuous Build Version","type":"plugin52b0be5c88ca16c9ae000005","settings":{"method":"GET","refresh":30,"use_thingproxy":true,"url":"https://continuous-cdn.par-beta.co.uk/build_version.txt"}},{"name":"Cloud Foundry PN","type":"plugin5376758af1776c1c2e000326","settings":{"channel":"cloud_foundry_5","subscribe_key":"sub-c-c0e412fc-a2a1-11e7-90db-92dc6f0eccb3"}},{"name":"Travis Summary","type":"plugin52b0be5c88ca16c9ae000005","settings":{"name":"Travis Summary","method":"GET","refresh":5,"use_thingproxy":true,"url":"https://api.travis-ci.org/repos/TransformCore/beis-par-beta/branches/master"}},{"name":"Travis Tests","type":"plugin5376758af1776c1c2e000326","settings":{"name":"Travis Tests","channel":"travis_tests","subscribe_key":"sub-c-c0e412fc-a2a1-11e7-90db-92dc6f0eccb3"}}],"columns":6,"bg_color":"#101214","pane_header_bg_color":"#272727","pane_bg_color":"#2A2A2A"}